<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.peakplatesapp.FriendsController"
            prefWidth="1000"
            prefHeight="800">

    <!-- Background -->
    <ImageView fitWidth="1000"
               fitHeight="800"
               layoutX="0"
               layoutY="0"
               preserveRatio="false">
        <image>
            <Image url="@PeakPlatesBackground.png"/>
        </image>
    </ImageView>

    <!-- Glass Panel -->
    <VBox layoutX="50"
          layoutY="50"
          prefWidth="900"
          prefHeight="700"
          spacing="20"
          alignment="TOP_CENTER"
          style="
              -fx-background-color: rgba(255,255,255,0.18);
              -fx-background-radius: 20;
              -fx-border-radius: 20;
              -fx-border-color: rgba(255,255,255,0.35);
              -fx-border-width: 1.5;
              -fx-padding: 25;
          ">

        <Label text="Friends"
               style="-fx-font-size: 28;
                      -fx-font-weight: bold;
                      -fx-text-fill: white;" />

        <Label text="Find and manage your friends"
               style="-fx-text-fill: rgba(255,255,255,0.85);" />

        <!-- Friends Section -->
        <VBox spacing="10"
              prefWidth="800"
              style="
                  -fx-background-color: rgba(255,255,255,0.22);
                  -fx-background-radius: 15;
                  -fx-padding: 15;
              ">

            <Label text="Your Friends"
                   style="-fx-font-weight: bold; -fx-text-fill: white;" />

            <Label fx:id="friendsCountLabel"
                   text="Loading..."
                   style="-fx-text-fill: rgba(255,255,255,0.75);" />

            <VBox fx:id="friendsContainer" spacing="10"/>
        </VBox>

        <!-- Search -->
        <HBox spacing="10" alignment="CENTER">
            <TextField fx:id="searchField"
                       promptText="Search users..."
                       onKeyReleased="#handleSearch"
                       prefWidth="350"
                       style="
                           -fx-background-color: rgba(255,255,255,0.25);
                           -fx-background-radius: 20;
                           -fx-text-fill: white;
                           -fx-prompt-text-fill: rgba(255,255,255,0.7);
                           -fx-border-color: transparent;
                       "/>

            <Button text="Search"
                    onAction="#handleSearch"
                    style="
                        -fx-background-color: white;
                        -fx-text-fill: #444;
                        -fx-font-weight: bold;
                        -fx-background-radius: 20;
                        -fx-padding: 8 18;
                    "/>
        </HBox>

        <Label fx:id="usersCountLabel"
               text="Loading users..."
               style="-fx-text-fill: rgba(255,255,255,0.75);" />

        <ScrollPane prefHeight="220" fitToWidth="true"
                    style="-fx-background-color: transparent;">
            <VBox fx:id="usersContainer" spacing="10" style="-fx-padding: 10;"/>
        </ScrollPane>

        <!-- Navigation -->
        <HBox spacing="12" alignment="CENTER">
            <Button text="Dashboard" onAction="#handleBackToDashboard"/>
            <Button text="Favorites" onAction="#handleViewFavorites"/>
            <Button text="Shared" onAction="#handleViewSharedWithMe"/>
            <Button text="Requests" onAction="#handleFriendRequests"/>
            <Button text="Logout"
                    onAction="#handleLogout"
                    style="-fx-background-color: #f44336; -fx-text-fill: white;"/>
        </HBox>

    </VBox>

</AnchorPane>
