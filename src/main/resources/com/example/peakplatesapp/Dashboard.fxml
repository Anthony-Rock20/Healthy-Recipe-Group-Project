<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane prefHeight="664.0" prefWidth="932.0" style="-fx-background-image: url('/com/example/peakplatesapp/PeakPlatesBackground.png');                   -fx-background-size: cover;                   -fx-background-position: center;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.peakplatesapp.DashboardController">
   <ImageView fitHeight="698.0" fitWidth="996.0" pickOnBounds="true" preserveRatio="true">
      <image>
         <Image url="@PeakPlatesBackground.png" />
      </image>
   </ImageView>

    <VBox alignment="TOP_CENTER" maxWidth="900" spacing="20" style="-fx-background-color: rgba(255,255,255,0.15);                  -fx-background-radius: 20;                  -fx-border-radius: 20;                  -fx-border-color: rgba(255,255,255,0.35);                  -fx-border-width: 1.5;                  -fx-padding: 25;">

        <!-- HEADER -->
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Label fx:id="welcomeLabel" style="-fx-font-size: 28;                           -fx-font-weight: bold;                           -fx-text-fill: white;" text="Welcome!" />

            <Region HBox.hgrow="ALWAYS" />

            <Button onAction="#handleUploadRecipe" style="-fx-background-color: white;                            -fx-text-fill: #444;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 8 16;" text="ðŸ“¤ Upload Recipe" />

            <Button onAction="#handleViewHome" style="-fx-background-color: #00C7D9;                            -fx-text-fill: white;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 8 16;" text="ðŸ  Home" />
        </HBox>

        <!-- SEARCH BAR -->
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: rgba(255,255,255,0.20);                      -fx-background-radius: 30;                      -fx-border-radius: 30;                      -fx-border-color: rgba(255,255,255,0.3);                      -fx-border-width: 1;                      -fx-padding: 10 18;">

            <TextField fx:id="searchField" onKeyReleased="#handleSearch" prefWidth="550" promptText="ðŸ” Search recipes by name..." style="-fx-background-color: transparent;                               -fx-text-fill: white;                               -fx-prompt-text-fill: rgba(255,255,255,0.7);                               -fx-border-color: transparent;" />

            <Button onAction="#handleClearSearch" style="-fx-background-color: white;                            -fx-text-fill: #444;                            -fx-background-radius: 20;                            -fx-padding: 8 14;" text="Clear" />
        </HBox>

        <!-- FILTER TAGS -->
        <VBox alignment="TOP_LEFT" spacing="8">
            <Label style="-fx-font-size: 14;                           -fx-font-weight: bold;                           -fx-text-fill: white;" text="Filter by Tags" />

            <ScrollPane fitToWidth="true" hbarPolicy="AS_NEEDED" prefHeight="60" style="-fx-background-color: transparent;" vbarPolicy="NEVER">
                <content>
                    <FlowPane fx:id="filterTagsContainer" hgap="10" prefWrapLength="820" vgap="10" />
                </content>
            </ScrollPane>
        </VBox>

        <!-- RECIPES -->
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" prefHeight="420" style="-fx-background-color: transparent;">
            <content>
                <VBox fx:id="recipesContainer" spacing="18">
                    <Label style="-fx-text-fill: rgba(255,255,255,0.85);                                   -fx-font-size: 16;" text="Loading recipes..." />
                </VBox>
            </content>
        </ScrollPane>

        <!-- FOOTER NAV -->
        <HBox alignment="CENTER" spacing="15">
            <Button onAction="#handleViewFavorites" style="-fx-background-color: white;                            -fx-text-fill: #d60000;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 10 18;" text="â¤ï¸ Favorites" />

            <Button onAction="#handleViewFriends" style="-fx-background-color: #9C27B0;                            -fx-text-fill: white;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 10 18;" text="ðŸ‘¥ Friends" />

            <Button onAction="#handleViewSharedWithMe" style="-fx-background-color: white;                            -fx-text-fill: #444;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 10 18;" text="ðŸ“¨ Shared with Me" />

            <Button onAction="#handleLogout" style="-fx-background-color: #f44336;                            -fx-text-fill: white;                            -fx-font-weight: bold;                            -fx-background-radius: 20;                            -fx-padding: 10 18;" text="ðŸšª Logout" />
        </HBox>

    </VBox>
</StackPane>
