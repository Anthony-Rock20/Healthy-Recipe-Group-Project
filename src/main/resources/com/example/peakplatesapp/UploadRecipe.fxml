<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.peakplatesapp.RecipeUploadController"
            prefHeight="700" prefWidth="800">

    <!-- Background Image -->
    <ImageView preserveRatio="false"
               AnchorPane.topAnchor="0"
               AnchorPane.bottomAnchor="0"
               AnchorPane.leftAnchor="0"
               AnchorPane.rightAnchor="0">
        <image>
            <Image url="@PeakPlatesBackground.png"/>
        </image>
    </ImageView>

    <BorderPane AnchorPane.topAnchor="0"
                AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0"
                AnchorPane.rightAnchor="0"
                style="-fx-background-color: transparent;">

        <!-- Top Banner -->
        <top>
            <VBox spacing="10"
                  style="-fx-background-color: rgba(255,255,255,0.20);
                         -fx-border-color: rgba(255,255,255,0.35);
                         -fx-border-width: 0 0 1.5 0;">
                <padding>
                    <Insets top="20" bottom="20" left="20" right="20"/>
                </padding>

                <Label text="Upload Recipe"
                       style="-fx-font-size: 28;
                              -fx-font-weight: bold;
                              -fx-text-fill: white;"/>

                <Label text="Share your delicious recipes with the community!"
                       style="-fx-font-size: 14;
                              -fx-text-fill: rgba(255,255,255,0.85);"/>
            </VBox>
        </top>

        <!-- Form -->
        <center>
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                <VBox spacing="20"
                      style="-fx-background-color: rgba(255,255,255,0.18);
                             -fx-background-radius: 22;
                             -fx-border-radius: 22;
                             -fx-border-color: rgba(255,255,255,0.35);
                             -fx-border-width: 1.5;">
                    <padding>
                        <Insets top="25" bottom="25" left="40" right="40"/>
                    </padding>

                    <!-- Image Selection -->
                    <VBox spacing="10" style="-fx-border-color: #ddd; -fx-border-width: 2;">
                        <padding>
                            <Insets top="20" bottom="20" left="20" right="20"/>
                        </padding>

                        <Label text="ðŸ“¸ Select Recipe Image"
                               style="-fx-font-size: 16;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.75);
                                      -fx-background-radius: 10;
                                      -fx-padding: 6 10;"/>

                        <StackPane prefHeight="250" style="-fx-background-color: #f9f9f9;">
                            <ImageView fx:id="imagePreview" fitHeight="240" preserveRatio="true"/>
                            <Label fx:id="imageLabel"
                                   text="Click â€œChoose Imageâ€"
                                   style="-fx-font-size: 14; -fx-text-fill: #999;"/>
                        </StackPane>

                        <Button fx:id="chooseImageButton" text="ðŸ–¼ï¸ Choose Image"
                                style="-fx-background-color: #2196F3; -fx-text-fill: white;"
                                onAction="#handleSelectImage"/>

                        <Label fx:id="selectedImageLabel"
                               text="No image selected"
                               style="-fx-font-size: 12;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.55);
                                      -fx-background-radius: 10;
                                      -fx-padding: 4 8;"/>

                        <Label text="âš ï¸ Maximum image size: 1 MB (1,048,576 bytes)"
                               style="-fx-font-size: 11;
                                      -fx-font-style: italic;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.55);
                                      -fx-background-radius: 10;
                                      -fx-padding: 4 8;"/>
                    </VBox>

                    <!-- Text Fields -->
                    <VBox spacing="10">
                        <Label text="ðŸ“› Recipe Name"
                               style="-fx-font-size: 16;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.75);
                                      -fx-background-radius: 10;
                                      -fx-padding: 6 10;"/>
                        <TextField fx:id="titleField" promptText="e.g. Classic Lasagna"/>

                        <!-- Dietary Info Row -->
                        <HBox spacing="10">
                            <VBox spacing="4">
                                <Label text="Calories"
                                       style="-fx-text-fill: #0B2A44;
                                              -fx-background-color: rgba(180,220,255,0.70);
                                              -fx-background-radius: 10;
                                              -fx-padding: 4 8;"/>
                                <TextField fx:id="caloriesField" promptText="kcal"/>
                            </VBox>
                            <VBox spacing="4">
                                <Label text="Protein (g)"
                                       style="-fx-text-fill: #0B2A44;
                                              -fx-background-color: rgba(180,220,255,0.70);
                                              -fx-background-radius: 10;
                                              -fx-padding: 4 8;"/>
                                <TextField fx:id="proteinField" promptText="g"/>
                            </VBox>
                            <VBox spacing="4">
                                <Label text="Carbs (g)"
                                       style="-fx-text-fill: #0B2A44;
                                              -fx-background-color: rgba(180,220,255,0.70);
                                              -fx-background-radius: 10;
                                              -fx-padding: 4 8;"/>
                                <TextField fx:id="carbField" promptText="g"/>
                            </VBox>
                            <VBox spacing="4">
                                <Label text="Fats (g)"
                                       style="-fx-text-fill: #0B2A44;
                                              -fx-background-color: rgba(180,220,255,0.70);
                                              -fx-background-radius: 10;
                                              -fx-padding: 4 8;"/>
                                <TextField fx:id="fatField" promptText="g"/>
                            </VBox>
                        </HBox>

                        <Label text="ðŸ·ï¸ Tags (select multiple)"
                               style="-fx-font-size: 14;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.75);
                                      -fx-background-radius: 10;
                                      -fx-padding: 6 10;"/>

                        <FlowPane fx:id="tagsContainer" hgap="8" vgap="8">
                            <children>
                                <CheckBox text="Weight Loss"/>
                                <CheckBox text="Muscle Gain"/>
                                <CheckBox text="Diabetic Friendly"/>
                                <CheckBox text="Vegetarian"/>
                                <CheckBox text="Dairy Free"/>
                                <CheckBox text="Anti-Inflammatory"/>
                                <CheckBox text="Nut Free"/>
                                <CheckBox text="Soy Free"/>
                                <CheckBox text="High Antioxidants"/>
                                <CheckBox text="Immunity Boosting"/>
                                <CheckBox text="Whole Grains"/>
                                <CheckBox text="Greens"/>
                                <CheckBox text="High Protein"/>
                                <CheckBox text="High Fiber"/>
                                <CheckBox text="Low Calories"/>
                                <CheckBox text="Vegan"/>
                                <CheckBox text="Gluten Free"/>
                                <CheckBox text="Heart Healthy"/>
                                <CheckBox text="Low Sugar"/>
                                <CheckBox text="Low Sodium"/>
                                <CheckBox text="Gut Friendly"/>
                                <CheckBox text="No Added Sugar"/>
                            </children>
                        </FlowPane>

                        <Label text="ðŸ¥˜ Ingredients"
                               style="-fx-font-size: 16;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.75);
                                      -fx-background-radius: 10;
                                      -fx-padding: 6 10;"/>
                        <TextArea fx:id="ingredientsField" wrapText="true" prefRowCount="6"
                                  promptText="List each ingredient on a new line:&#10;- 2 cups flour&#10;- 1 cup sugar&#10;- 3 eggs"/>

                        <Label text="ðŸ‘¨â€ðŸ³ Steps"
                               style="-fx-font-size: 16;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #0B2A44;
                                      -fx-background-color: rgba(180,220,255,0.75);
                                      -fx-background-radius: 10;
                                      -fx-padding: 6 10;"/>
                        <TextArea fx:id="stepsField" wrapText="true" prefRowCount="6"
                                  promptText="List each step on a new line:&#10;1. Preheat oven to 350Â°F&#10;2. Mix dry ingredients&#10;3. Add wet ingredients..."/>
                    </VBox>

                    <!-- Buttons -->
                    <HBox spacing="20" alignment="CENTER">
                        <Button text="ðŸ“¤ Upload Recipe"
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white;"
                                onAction="#handleUpload"/>
                        <Button text="âŒ Cancel"
                                style="-fx-background-color: #f44336; -fx-text-fill: white;"
                                onAction="#handleCancel"/>
                    </HBox>
                </VBox>
            </ScrollPane>
        </center>

        <!-- Bottom Navigation -->
        <bottom>
            <HBox spacing="10" alignment="CENTER"
                  style="-fx-background-color: rgba(255,255,255,0.20);
                         -fx-border-color: rgba(255,255,255,0.35);
                         -fx-border-width: 1.5 0 0 0;">
                <padding>
                    <Insets top="10" bottom="10" left="20" right="20"/>
                </padding>

                <Button text="ðŸ  Dashboard" style="-fx-font-size: 12; -fx-padding: 8 15;" onAction="#handleCancel"/>
                <Button text="â¤ï¸ Favorites" style="-fx-font-size: 12; -fx-padding: 8 15;" onAction="#handleViewFavorites"/>
                <Button text="ðŸ‘¥ Friends" style="-fx-font-size: 12; -fx-padding: 8 15; -fx-background-color: #9C27B0; -fx-text-fill: white;" onAction="#handleViewFriends"/>
                <Button text="ðŸ“¨ Shared with Me" style="-fx-font-size: 12; -fx-padding: 8 15;" onAction="#handleViewSharedWithMe"/>
                <Button text="ðŸšª Logout" style="-fx-font-size: 12; -fx-padding: 8 15; -fx-background-color: #f44336; -fx-text-fill: white;" onAction="#handleLogout"/>
            </HBox>
        </bottom>

    </BorderPane>
</AnchorPane>
